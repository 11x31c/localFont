!function(){var e,t,n,o={},a=["woff","woff2","ttf"],i=document.createElement("style"),d=[],c="",r=[],s={},l=2e3,u=function(e,t){var n=1024,o=1024*n,a=1024*o,i=1024*a;return e>=0&&n>e?e+" B":e>=n&&o>e?(e/n).toFixed(t)+" KB":e>=o&&a>e?(e/o).toFixed(t)+" MB":e>=a&&i>e?(e/a).toFixed(t)+" GB":e>=i?(e/i).toFixed(t)+" TB":e+" B"},f=function(e){return encodeURI(e).split(/%..|./).length-1},m=function(e){i.innerHTML=e},h=function(e){e.stopPropagation(),e.preventDefault(),e.target.className="dragover"===e.type?"hover":""},p=function(e){return-1===a.indexOf(e.split(".").pop())?!1:r.some(function(t){return t.filename===e})?!1:!0},y=function(e){switch(e){case"ttf":return"font/truetype";case"woff":return"application/font-woff";case"svg":return"image/svg+xml";default:return"font/truetype"}},g=function(e){switch(e){case"ttf":return"truetype";case"woff":return"woff";case"svg":return"svg";case"eot":return"eot";default:return"truetype"}},v=function(e){var t=e.replace(/\..+$/,"");return t=t.replace(/(bold)/i,""),t=t.replace(/-/g,"")},w=function(e){for(var t,n,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i="",d=0,c=e.length;c>d;){if(t=255&e.charCodeAt(d++),d===c){i+=a.charAt(t>>2),i+=a.charAt((3&t)<<4),i+="==";break}if(n=e.charCodeAt(d++),d===c){i+=a.charAt(t>>2),i+=a.charAt((3&t)<<4|(240&n)>>4),i+=a.charAt((15&n)<<2),i+="=";break}o=e.charCodeAt(d++),i+=a.charAt(t>>2),i+=a.charAt((3&t)<<4|(240&n)>>4),i+=a.charAt((15&n)<<2|(192&o)>>6),i+=a.charAt(63&o)}return i},E=function(){var e="",t=" ",o="\n";c="",document.getElementById("nominifycss").checked||(t="",o=""),r.forEach(function(a,i){c+="@font-face{"+o+t+"font-family: '"+n.value+"';"+o+t+"font-weight: "+a.weight+";"+o+t+"font-style: "+a.style+";"+o+t+"src:url(data:"+a.mime+";charset=utf-8;base64,"+a.base64+") format('"+a.format+"');"+o+"}"+o,e+="."+a.style+i+a.weight+a.extension+"{"+t+"font-family: '"+n.value+"', serif;"+o+t+"font-weight: "+a.weight+";"+o+t+"font-style: "+a.style+";"+o+"}"}),document.getElementById("outputcss").value=c,document.getElementById("csssize").innerHTML="("+u(f(c))+")",m(c+e),document.querySelector(".fontform").classList.add("done"),document.querySelector(".output-wrap").classList.add("done"),document.querySelector("body").classList.add("done")},L=function(e,t,n){"familyname"===t?E():r[e][t]!==n.value&&(r[e][t]=n.value,T())},B=function(){clearTimeout(s)},S=function(e,t,n){B(),s=setTimeout(function(){L(e,t,n)},l)},_=function(){document.querySelector(".fontform").classList.remove("done"),document.querySelector(".output-wrap").classList.remove("done"),document.querySelector("body").classList.remove("done"),setTimeout(function(){r=[],T(),document.querySelector(".fontform").classList.remove("done"),document.querySelector(".output-wrap").classList.remove("done"),document.querySelector("body").classList.remove("done"),document.getElementById("font_family").innerHTML="",document.getElementById("csssize").innerHTML="",n=void 0,e.innerHTML="/font.css",C()},900)},T=function(){var e=[];r.constructor===Array&&(e=r.splice()),r.sort(function(e,t){return e.weight-t.weight?e.weight-t.weight:e.style>t.style?-1:e.style<t.style?1:void 0}),e.length&&e===r||(k(),E())},k=function(){t.innerHTML="",r.forEach(function(e,n){var o=document.createElement("div");o.classList.add("font");var a=document.createElement("div");a.classList.add("font__demo"),a.innerHTML="Demo: "+e.filename+" - Lorem ipsum dolor sit amet, consectetur adipiscing elit.";var i=document.createElement("input");i.classList.add("field"),i.value=e.mime,i.addEventListener("keyup",function(){S(n,"mime",this)},!1),i.addEventListener("keydown",B,!1);var d=document.createElement("input");d.classList.add("field"),d.placeholder="normal",d.value=e.style,d.addEventListener("keyup",function(){S(n,"style",this)},!1),d.addEventListener("keydown",B,!1);var c=document.createElement("input");c.classList.add("field"),c.type="number",c.step=100,c.placeholder="500",c.value=e.weight,c.addEventListener("keyup",function(){S(n,"weight",this)},!1),c.addEventListener("keydown",B,!1);var s=document.createElement("button");s.classList.add("field"),s.innerHTML="Remove",s.addEventListener("click",function(){this.parentNode.parentNode.removeChild(this.parentNode),r.indexOf(e)>-1&&r.splice(r.indexOf(e),1),T(),0===r.length&&_()}),o.classList.add(e.style+n+e.weight+e.extension),o.appendChild(a),o.appendChild(i),o.appendChild(c),o.appendChild(d),o.appendChild(s),e.data=o,t.appendChild(e.data)})},x=function(){void 0===n&&(n=document.createElement("input"),n.placeholder="Set to localFont for extra fun.",n.value=v(r[0].filename)||"Family name",n.addEventListener("keyup",function(){S(0,"familyname",this)},!1),n.addEventListener("keydown",B,!1),document.getElementById("font_family").appendChild(n)),T()},I=function(e){if(e===r.length)x();else{if(e>r.length)return;{r[e].file}o.onload=function(t){var n=t.target.result;r[e].base64=w(n),I(e+1)},o.readAsBinaryString(r[e].file)}},b=function(e){var t={};t.file=e,t.filename=e.name,t.extension=e.name.split(".").pop(),t.mime=y(t.extension),t.format=g(t.extension),t.style="normal",/(italic)/i.test(e.name)&&(t.style="italic"),t.weight=500,/(light)/i.test(e.name)&&(t.weight=300),/(book)/i.test(e.name)&&(t.weight=400),/(demi)/i.test(e.name)&&(t.weight=600),/(bold)/i.test(e.name)&&(t.weight=700),/(heavy)/i.test(e.name)&&(t.weight=800),/(extrabold)/i.test(e.name)&&(t.weight=800),r.push(t)},A=function(e){var n=r.length||0,a=!1;if(t=document.getElementById("font_list"),h(e),d=e.dataTransfer.files){o=new FileReader;for(var i=0;i<d.length;i++)p(d[i].name)&&(b(d[i]),a=!0);a&&I(n)}},C=function(){document.getElementById("pathspan").innerHTML=e.value,document.getElementById("outputjs").value=/\.(css)$/i.test(e.value)?'!function(){"use strict";function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e){return window.localStorage&&localStorage.font_css_cache&&localStorage.font_css_cache_file===e}function n(){if(window.localStorage&&window.XMLHttpRequest)if(t(o))c(localStorage.font_css_cache);else{var n=new XMLHttpRequest;n.open("GET",o,!0),e(n,"load",function(){4===n.readyState&&(c(n.responseText),localStorage.font_css_cache=n.responseText,localStorage.font_css_cache_file=o)}),n.send()}else{var a=document.createElement("link");a.href=o,a.rel="stylesheet",a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),document.cookie="font_css_cache"}}function c(e){var t=document.createElement("style");t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}var o="/'+e.value+'";window.localStorage&&localStorage.font_css_cache||document.cookie.indexOf("font_css_cache")>-1?n():e(window,"load",n)}();':"I need a *.css file in order to work!"},M=function(){document.getElementsByTagName("head")[0].appendChild(i),document.getElementById("filedrag").addEventListener("dragover",h,!1),document.getElementById("filedrag").addEventListener("dragleave",h,!1),document.getElementById("fileselect").addEventListener("change",A,!1),document.getElementById("filedrag").addEventListener("drop",A,!1),document.getElementById("nominifycss").addEventListener("change",E,!1),document.getElementById("clearAll").addEventListener("click",_,!1),e=document.getElementById("css_path"),e.addEventListener("keyup",C,!1),document.querySelector(".fontform").classList.add("hidden"),document.querySelector(".output-wrap").classList.add("hidden")};document.addEventListener("DOMContentLoaded",function(){window.File&&window.FileReader&&window.FileList&&window.Blob?M():alert("The File APIs are not fully supported in this browser.")})}();

!function(){var e={},t=["woff","woff2","ttf"],n,o=document.createElement("style"),a,d=[],c,r="",l=[],s={},u=2e3,f="	",m="\n",h=function(e,t){var n=1024,o=1024*n,a=1024*o,i=1024*a;return e>=0&&n>e?e+" B":e>=n&&o>e?(e/n).toFixed(t)+" KB":e>=o&&a>e?(e/o).toFixed(t)+" MB":e>=a&&i>e?(e/a).toFixed(t)+" GB":e>=i?(e/i).toFixed(t)+" TB":e+" B"},p=function(e){return encodeURI(e).split(/%..|./).length-1},g=function(e){o.innerHTML=e},y=function(e){e.stopPropagation(),e.preventDefault(),e.target.className="dragover"==e.type?"hover":""},v=function(e){return-1==t.indexOf(e.split(".").pop())?!1:l.some(function(t){return t.filename==e})?!1:!0},w=function(e){switch(e){case"ttf":return"font/truetype";case"woff":return"application/font-woff";case"svg":return"image/svg+xml";default:return"font/truetype"}},E=function(e){switch(e){case"ttf":return"truetype";case"woff":return"woff";case"svg":return"svg";case"eot":return"eot";default:return"truetype"}},L=function(e){var t=e.replace(/\..+$/,"");return t=t.replace(/(bold)/i,""),t=t.replace(/-/g,"")},B=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=0,a=e.length,i,d,c;a>o;){if(i=255&e.charCodeAt(o++),o==a){n+=t.charAt(i>>2),n+=t.charAt((3&i)<<4),n+="==";break}if(d=e.charCodeAt(o++),o==a){n+=t.charAt(i>>2),n+=t.charAt((3&i)<<4|(240&d)>>4),n+=t.charAt((15&d)<<2),n+="=";break}c=e.charCodeAt(o++),n+=t.charAt(i>>2),n+=t.charAt((3&i)<<4|(240&d)>>4),n+=t.charAt((15&d)<<2|(192&c)>>6),n+=t.charAt(63&c)}return n},S=function(){console.log("Building CSS...");var e="",t="	",n="\n";r="",document.getElementById("nominifycss").checked||(t="",n=""),l.forEach(function(o,a){r+="@font-face{"+n+t+"font-family: '"+c.value+"';"+n+t+"font-weight: "+o.weight+";"+n+t+"font-style: "+o.style+";"+n+t+"src:url(data:"+o.mime+";charset=utf-8;base64,"+o.base64+") format('"+o.format+"');"+n+"}"+n,e+="."+o.style+a+o.weight+o.extension+"{"+t+"font-family: '"+c.value+"', serif;"+n+t+"font-weight: "+o.weight+";"+n+t+"font-style: "+o.style+";"+n+"}"}),document.getElementById("outputcss").value=r,document.getElementById("csssize").innerHTML="("+h(p(r))+")",g(r+e),document.querySelector(".fontform").classList.add("done"),document.querySelector(".output-wrap").classList.add("done"),document.querySelector("body").classList.add("done")},_=function(e,t,n){"familyname"==t?S():l[e][t]!=n.value&&(l[e][t]=n.value,I())},T=function(){clearTimeout(s)},k=function(e,t,n){T(),s=setTimeout(function(){_(e,t,n)},u)},x=function(){document.querySelector(".fontform").classList.remove("done"),document.querySelector(".output-wrap").classList.remove("done"),document.querySelector("body").classList.remove("done"),setTimeout(function(){l=[],I(),document.querySelector(".fontform").classList.remove("done"),document.querySelector(".output-wrap").classList.remove("done"),document.querySelector("body").classList.remove("done"),document.getElementById("font_family").innerHTML="",document.getElementById("csssize").innerHTML="",c=void 0,n.innerHTML="/font.css",H()},900)},I=function(){var e=[];l.constructor===Array&&(e=l.splice()),l.sort(function(e,t){return e.weight-t.weight?e.weight-t.weight:e.style>t.style?-1:e.style<t.style?1:void 0}),e.length&&e==l||(b(),S())},b=function(){a.innerHTML="",l.forEach(function(e,t){var n=document.createElement("div");n.classList.add("font");var o=document.createElement("div");o.classList.add("font__demo"),o.innerHTML="Demo: "+e.filename+" - Lorem ipsum dolor sit amet, consectetur adipiscing elit.";var i=document.createElement("input");i.classList.add("field"),i.value=e.mime,i.addEventListener("keyup",function(){k(t,"mime",this)},!1),i.addEventListener("keydown",T,!1);var d=document.createElement("input");d.classList.add("field"),d.placeholder="normal",d.value=e.style,d.addEventListener("keyup",function(){k(t,"style",this)},!1),d.addEventListener("keydown",T,!1);var c=document.createElement("input");c.classList.add("field"),c.type="number",c.step=100,c.placeholder="500",c.value=e.weight,c.addEventListener("keyup",function(){k(t,"weight",this)},!1),c.addEventListener("keydown",T,!1);var r=document.createElement("button");r.classList.add("field"),r.innerHTML="Remove",r.addEventListener("click",function(){this.parentNode.parentNode.removeChild(this.parentNode),l.indexOf(e)>-1&&(console.table(l),l.splice(l.indexOf(e),1),console.table(l)),I(),0==l.length&&x()}),n.classList.add(e.style+t+e.weight+e.extension),n.appendChild(o),n.appendChild(i),n.appendChild(c),n.appendChild(d),n.appendChild(r),e.data=n,a.appendChild(e.data)})},A=function(){void 0==c&&(c=document.createElement("input"),c.placeholder="Set to localFont for extra fun.",c.value=L(l[0].filename)||"Family name",c.addEventListener("keyup",function(){k(0,"familyname",this)},!1),c.addEventListener("keydown",T,!1),document.getElementById("font_family").appendChild(c)),I()},C=function(t){if(t==l.length)A();else{if(t>l.length)return;var n=l[t].file;e.onload=function(e){var n=e.target.result;l[t].base64=B(n),C(t+1)},e.readAsBinaryString(l[t].file)}},M=function(e){var t={};t.file=e,t.filename=e.name,t.extension=e.name.split(".").pop(),t.mime=w(t.extension),t.format=E(t.extension),t.style="normal",/(italic)/i.test(e.name)&&(t.style="italic"),t.weight=500,/(light)/i.test(e.name)&&(t.weight=300),/(book)/i.test(e.name)&&(t.weight=400),/(demi)/i.test(e.name)&&(t.weight=600),/(bold)/i.test(e.name)&&(t.weight=700),/(heavy)/i.test(e.name)&&(t.weight=800),/(extrabold)/i.test(e.name)&&(t.weight=800),l.push(t)},q=function(t){var n=l.length||0,o=!1;if(a=document.getElementById("font_list"),y(t),d=t.dataTransfer.files){for(e=new FileReader,i=0;i<d.length;i++)v(d[i].name)&&(M(d[i]),o=!0);o&&C(n)}},H=function(){document.getElementById("pathspan").innerHTML=n.value,document.getElementById("outputjs").value=/\.(css)$/i.test(n.value)?'!function(){"use strict";function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e){return window.localStorage&&localStorage.font_css_cache&&localStorage.font_css_cache_file===e}function n(){if(window.localStorage&&window.XMLHttpRequest)if(t(o))c(localStorage.font_css_cache);else{var n=new XMLHttpRequest;n.open("GET",o,!0),e(n,"load",function(){4===n.readyState&&(c(n.responseText),localStorage.font_css_cache=n.responseText,localStorage.font_css_cache_file=o)}),n.send()}else{var a=document.createElement("link");a.href=o,a.rel="stylesheet",a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a),document.cookie="font_css_cache"}}function c(e){var t=document.createElement("style");t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}var o="/'+n.value+'";window.localStorage&&localStorage.font_css_cache||document.cookie.indexOf("font_css_cache")>-1?n():e(window,"load",n)}();':"I need a *.css file in order to work!"},F=function(){document.getElementsByTagName("head")[0].appendChild(o),document.getElementById("filedrag").addEventListener("dragover",y,!1),document.getElementById("filedrag").addEventListener("dragleave",y,!1),document.getElementById("fileselect").addEventListener("change",q,!1),document.getElementById("filedrag").addEventListener("drop",q,!1),document.getElementById("nominifycss").addEventListener("change",S,!1),document.getElementById("clearAll").addEventListener("click",x,!1),n=document.getElementById("css_path"),n.addEventListener("keyup",H,!1),document.querySelector(".fontform").classList.add("hidden"),document.querySelector(".output-wrap").classList.add("hidden")};document.addEventListener("DOMContentLoaded",function(){window.File&&window.FileReader&&window.FileList&&window.Blob?F():alert("The File APIs are not fully supported in this browser.")})}();